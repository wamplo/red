(function(f){f.redriver={loadedcss:[],loadedjs:[],getJS:function(a,b,d){for(var c=this,e=[],g=0;g<a[b].length;g++)f.inArray(a[b][g],c.loadedjs)==-1&&(d.cache===1&&(e.push(f.ajax({url:a[b][g],async:!0,cache:!0,dataType:"script"})),c.loadedjs.push(a[b][g])),d.cache===0&&(e.push(f.getScript(a[b][g])),c.loadedjs.push(a[b][g])));f.when.apply(null,e).then(function(){b<a.length-1&&c.getJS(a,b+1,d)})},getStyle:function(a,b,d){for(var c=0;c<a.length;c++){if(f.inArray(a[c],this.loadedcss)==-1){var e=document.createElement("link");
e.type="text/css";e.rel="stylesheet";if(b.cache===0)e.href=a[c]+"?_="+(new Date).getTime();if(b.cache===1)e.href=a[c];document.head.appendChild(e);this.loadedcss.push(a[c])}a.length-1===c&&d&&typeof d==="function"&&d()}},getContent:function(a,b,d){f("#"+a.id).html(a.html);d()},branch:function(a){var b=this;opt={};opt.cache=a.cache;this.getStyle(a.css,opt,function(){b.getContent(a.src,opt,function(){a.js&&b.getJS(a.js,0,opt)})})}}})(jQuery);
